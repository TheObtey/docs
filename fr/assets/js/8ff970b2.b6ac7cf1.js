"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[7454],{3905:function(e,a,n){n.d(a,{Zo:function(){return p},kt:function(){return d}});var t=n(67294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=t.createContext({}),c=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},p=function(e){var a=c(e.components);return t.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,v=m["".concat(l,".").concat(d)]||m[d]||u[d]||o;return n?t.createElement(v,i(i({ref:a},p),{},{components:n})):t.createElement(v,i({ref:a},p))}));function d(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},56395:function(e,a,n){n.r(a),n.d(a,{assets:function(){return p},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var t=n(83117),r=n(80102),o=(n(67294),n(3905)),i=["components"],s={title:"Communication entre Packages",description:"Tout ce que vous avez besoin de savoir pour communiquer entre diff\xe9rents Packages",sidebar_position:3,tags:["scripting"]},l=void 0,c={unversionedId:"core-concepts/scripting/communicating-between-packages",id:"version-latest/core-concepts/scripting/communicating-between-packages",title:"Communication entre Packages",description:"Tout ce que vous avez besoin de savoir pour communiquer entre diff\xe9rents Packages",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-latest/core-concepts/scripting/communicating-between-packages.md",sourceDirName:"core-concepts/scripting",slug:"/core-concepts/scripting/communicating-between-packages",permalink:"/fr/docs/core-concepts/scripting/communicating-between-packages",draft:!1,editUrl:"https://github.com/nanos-world/docs/edit/master/versioned_docs/version-latest/core-concepts/scripting/communicating-between-packages.md",tags:[{label:"scripting",permalink:"/fr/docs/tags/scripting"}],version:"latest",sidebarPosition:3,frontMatter:{title:"Communication entre Packages",description:"Tout ce que vous avez besoin de savoir pour communiquer entre diff\xe9rents Packages",sidebar_position:3,tags:["scripting"]},sidebar:"version-latest/main",previous:{title:"Authority Concepts",permalink:"/fr/docs/core-concepts/scripting/authority-concepts"},next:{title:"Valeurs des entit\xe9s",permalink:"/fr/docs/core-concepts/scripting/entity-values"}},p={},u=[{value:"\xc9v\xe9nements personnalis\xe9s",id:"\xe9v\xe9nements-personnalis\xe9s",level:2},{value:"Communiquer avec les Packages du m\xeame c\xf4t\xe9",id:"communiquer-avec-les-packages-du-m\xeame-c\xf4t\xe9",level:3},{value:"Envoi de donn\xe9es via le r\xe9seau",id:"envoi-de-donn\xe9es-via-le-r\xe9seau",level:3},{value:"Fonctions export\xe9es des Packages",id:"fonctions-export\xe9es-des-packages",level:2},{value:"Exportation d&#39;une Fonction",id:"exportation-dune-fonction",level:3},{value:"Appel d&#39;une Fonction Export\xe9e depuis un autre Package",id:"appel-dune-fonction-export\xe9e-depuis-un-autre-package",level:3},{value:"Utilisation de Package.RequirePackage",id:"utilisation-de-packagerequirepackage",level:2},{value:"R\xe9sultat",id:"r\xe9sultat",level:4}],m={toc:u};function d(e){var a=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,t.Z)({},m,n,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Tout ce que vous avez besoin de savoir pour communiquer entre diff\xe9rents Packages"),(0,o.kt)("p",null,"Dans nanos world, il y a 3 fa\xe7ons principales d'interagir avec les autres ",(0,o.kt)("strong",{parentName:"p"},"Packages"),". Dans cette page, nous vous expliquerons en d\xe9tail comment faire."),(0,o.kt)("h2",{id:"\xe9v\xe9nements-personnalis\xe9s"},"\xc9v\xe9nements personnalis\xe9s"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Pour plus d'informations et d'exemples sur l'utilisation d'\xe9v\xe9nements personnalis\xe9s, veuillez vous r\xe9f\xe9rer aux Events."))),(0,o.kt)("h3",{id:"communiquer-avec-les-packages-du-m\xeame-c\xf4t\xe9"},"Communiquer avec les Packages du m\xeame c\xf4t\xe9"),(0,o.kt)("p",null,"Les \xe9v\xe9nements personnalis\xe9s sont le moyen plus facile d'envoyer des donn\xe9es ou des informations \xe0 d'autres packages:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageOne/Server/Index.lua"',title:'"PackageOne/Server/Index.lua"'},'local my_parameter1 = 123\nlocal my_parameter2 = "hello there"\nlocal my_parameter3 = { important_stuff = "omg!" }\n\nEvents.Call("MyAwesomeEvent", my_parameter1, my_parameter2, my_parameter3)\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageTwo/Server/Index.lua"',title:'"PackageTwo/Server/Index.lua"'},'Events.Subscribe("MyAwesomeEvent", function(parameter1, parameter2, parameter3)\n    Package.Log("Received " .. parameter1) -- Re\xe7u: 123\n    Package.Log("Received " .. parameter2) -- Re\xe7u: hello there\n    Package.Log("Received " .. parameter3) -- Re\xe7u: tableau\nend)\n')),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"Note :")," L'appel d'\xe9v\xe9nements d\xe9clenchera l'\xe9v\xe9nement dans tous les Packages."))),(0,o.kt)("h3",{id:"envoi-de-donn\xe9es-via-le-r\xe9seau"},"Envoi de donn\xe9es via le r\xe9seau"),(0,o.kt)("p",null,"L'envoi d'informations via le r\xe9seau n'est pas diff\xe9rent de l'envoi dans le m\xeame c\xf4t\xe9:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="Server/Index.lua"',title:'"Server/Index.lua"'},'local my_parameter1 = "cool data from network"\n\n-- Envoyez cet \xe9v\xe9nement \xe0 tous les joueurs\nEvents.BroadcastRemote("GetThisFromServer", my_parameter1)\n\nlocal player_02 = GetPlayerSomehow()\n\n-- Ou envoyez cet \xe9v\xe9nement \xe0 un joueur sp\xe9cifique\nEvents.CallRemote("GetThisFromServer", player_02, my_parameter1)\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="Client/Index.lua"',title:'"Client/Index.lua"'},'Events.Subscribe("GetThisFromServer", function(parameter1, parameter2, parameter3)\n    Package.Log("Received " .. parameter1) -- Re\xe7u: "cool data from network"\nend)\n')),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"Note :")," L'appel d'\xe9v\xe9nements r\xe9seau d\xe9clenchera l'\xe9v\xe9nement dans tous les paquets de l'autre c\xf4t\xe9."))),(0,o.kt)("h2",{id:"fonctions-export\xe9es-des-packages"},"Fonctions export\xe9es des Packages"),(0,o.kt)("p",null,"Une autre fa\xe7on de communiquer est d'utiliser les fonctions export\xe9es. Avec les fonctions export\xe9es, vous pouvez d\xe9finir des fonctions dans votre Package qui peuvent \xeatre appel\xe9es par n'importe quel autre Paquet et avoir une valeur retourn\xe9e."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Contrairement aux \xe9v\xe9nements, les fonctions export\xe9es peuvent renvoyer des valeurs o\xf9 elles sont appel\xe9es. Mais vous ne pouvez appeler des fonctions export\xe9es que depuis le m\xeame c\xf4t\xe9 ","(","Serveur ou Client","\\",")."))),(0,o.kt)("h3",{id:"exportation-dune-fonction"},"Exportation d'une Fonction"),(0,o.kt)("p",null,"Pour exporter des fonctions, utilisez la m\xe9thode ",(0,o.kt)("inlineCode",{parentName:"p"},"Package.Export()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageOne/Server/Index.lua"',title:'"PackageOne/Server/Index.lua"'},"-- D\xe9finit une fonction que vous voulez exporter\nfunction SpawnCoolWeapon(location, rotation)\n    local cool_weapon = Weapon(location or Vector(), rotation or Rotator(), ...)\n    return cool_weapon\nend\n\n-- Exporte la fonction pour pour qu'elle puisse \xeatre appel\xe9e par d'autres paquets. \nPackage.Export(\"SpawnCoolWeapon\", SpawnCoolWeapon)\n")),(0,o.kt)("h3",{id:"appel-dune-fonction-export\xe9e-depuis-un-autre-package"},"Appel d'une Fonction Export\xe9e depuis un autre Package"),(0,o.kt)("p",null,"Pour appeler une fonction export\xe9e dans un autre Package, utilisez la m\xe9thode ",(0,o.kt)("inlineCode",{parentName:"p"},"Package.Call()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageTwo/Server/Index.lua"',title:'"PackageTwo/Server/Index.lua"'},'-- Appelle la fonction export\xe9e\nlocal cool_weapon = Package.Call("PackageOne","SpawnCoolWeapon", Vector(), Rotator())\n')),(0,o.kt)("h2",{id:"utilisation-de-packagerequirepackage"},"Utilisation de Package.RequirePackage"),(0,o.kt)("p",null,"La derni\xe8re fa\xe7on de communiquer entre les Packages est de charger d'autres Packages \xe0 l'int\xe9rieur du Package actuel :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageOne/Server/Index.lua"',title:'"PackageOne/Server/Index.lua"'},'Package.Log("Hello from Package One!")\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="PackageTwo/Server/Index.lua"',title:'"PackageTwo/Server/Index.lua"'},'Package.RequirePackage("PackageOne")\n\nPackage.Log("Hello from Package Two!")\n')),(0,o.kt)("h4",{id:"r\xe9sultat"},"R\xe9sultat"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Hello from Package One!\nHello from Package Two!\n")),(0,o.kt)("p",null,"Cela va charger le fichier Index.lua du Package 1 dans la VM du Package 2 o\xf9 vous avez appel\xe9 ",(0,o.kt)("inlineCode",{parentName:"p"},"Package.RequirePackage()"),"."),(0,o.kt)("p",null,"Le paquet requis sera \xe9galement envoy\xe9 aux clients, alors vous pouvez ",(0,o.kt)("inlineCode",{parentName:"p"},"RequirePackage")," \xe9galement dans le c\xf4t\xe9 client."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Pour pouvoir ",(0,o.kt)("inlineCode",{parentName:"p"},"RequirePackage")," dans le Client, vous devez d'abord le ",(0,o.kt)("inlineCode",{parentName:"p"},"RequirePackage")," dans le Serveur, afin qu'il puisse \xeatre charg\xe9 et envoy\xe9 aux Clients."))))}d.isMDXComponent=!0}}]);