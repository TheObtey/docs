"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[7576],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(n),g=r,c=m["".concat(l,".").concat(g)]||m[g]||k[g]||i;return n?a.createElement(c,o(o({ref:t},p),{},{components:n})):a.createElement(c,o({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},53981:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>k,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const i={title:"Paketleitfaden",description:"Alles, was Sie \xfcber Pakete wissen m\xfcssen",sidebar_position:0,tags:["scripting","pakete"],keywords:["pakete","scripting","lua"]},o=void 0,s={unversionedId:"core-concepts/packages/packages-guide",id:"core-concepts/packages/packages-guide",title:"Paketleitfaden",description:"Alles, was Sie \xfcber Pakete wissen m\xfcssen",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/core-concepts/packages/packages-guide.md",sourceDirName:"core-concepts/packages",slug:"/core-concepts/packages/packages-guide",permalink:"/de/docs/next/core-concepts/packages/packages-guide",draft:!1,editUrl:"https://github.com/nanos-world/docs/edit/master/docs/core-concepts/packages/packages-guide.md",tags:[{label:"scripting",permalink:"/de/docs/next/tags/scripting"},{label:"pakete",permalink:"/de/docs/next/tags/pakete"}],version:"current",sidebarPosition:0,frontMatter:{title:"Paketleitfaden",description:"Alles, was Sie \xfcber Pakete wissen m\xfcssen",sidebar_position:0,tags:["scripting","pakete"],keywords:["pakete","scripting","lua"]},sidebar:"main",previous:{title:"Linux & ARM Server installation",permalink:"/de/docs/next/core-concepts/server-manual/server-linux-arm"},next:{title:"Ladebildschirm",permalink:"/de/docs/next/core-concepts/packages/loading-screen"}},l={},d=[{value:"Ordnerstruktur",id:"ordnerstruktur",level:2},{value:"Paketkonfiguration",id:"paketkonfiguration",level:2},{value:"Einstellungen detailliert",id:"einstellungen-detailliert",level:3},{value:"Paketarten",id:"paketarten",level:3},{value:"Compatibility Version",id:"compatibility-version",level:3},{value:"Ignoring Client Folders",id:"ignoring-client-folders",level:2}],p={toc:d};function k(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Pakete")," sind Teile/Komponenten deines Servers, die beispielsweise Lua-Skripte ausf\xfchren, um mit dem Spiel zu interagieren."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55583).Z,width:"628",height:"170"})),(0,r.kt)("p",null,"Jedes Paket ist isoliert und hat seine eigene Lua Virtual Machine. Dies bedeutet, dass jeder seinen eigenen globalen Anwendungsbereich hat und nicht direkt auf andere Daten zugreifen kann."),(0,r.kt)("h2",{id:"ordnerstruktur"},"Ordnerstruktur"),(0,r.kt)("p",null,"Alle Pakete m\xfcssen unter den Ordner ",(0,r.kt)("inlineCode",{parentName:"p"},"Server/Packages/")," liegen. Jedes Paket ist ein Ordner unter diesem Pfad."),(0,r.kt)("p",null,"Ein Paket muss dabei folgende Ordner enthalten: ",(0,r.kt)("inlineCode",{parentName:"p"},"Server"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Client")," und ",(0,r.kt)("inlineCode",{parentName:"p"},"Shared"),". Nur ",(0,r.kt)("strong",{parentName:"p"},"Client")," und ",(0,r.kt)("strong",{parentName:"p"},"Shared")," Ordner werden an die Clients gesendet und geladen, sobald diese sich mit dem Server verbinden."),(0,r.kt)("p",null,"Jedes ",(0,r.kt)("strong",{parentName:"p"},"Package")," ","(","Paket",")"," muss eine Datei namens ",(0,r.kt)("inlineCode",{parentName:"p"},"Index.lua")," besitzen. Dabei sollte die Datei in den Ordnern ",(0,r.kt)("strong",{parentName:"p"},"Server"),", ",(0,r.kt)("strong",{parentName:"p"},"Client")," oder ",(0,r.kt)("strong",{parentName:"p"},"Shared")," hinterlegt werden. Dies ist die einzige Datei, welche ausgel\xf6st wird, sobald das Paket geladen wird. Auf dieser Weise ist diese Datei verantwortlich f\xfcr die Aufnahme anderer Dateien und das Starten der Funktionalit\xe4ten."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="Server Folder"',title:'"Server','Folder"':!0},"NanosWorldServer.exe\nPackages/\n\u251c\u2500\u2500 My_Package_01/\n\u2502   \u251c\u2500\u2500 Server/\n\u2502   \u2502   \u251c\u2500\u2500 Index.lua\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u251c\u2500\u2500 Client/\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u251c\u2500\u2500 Shared/\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u2514\u2500\u2500 Package.toml\n\u251c\u2500\u2500 My_Package_02/\n\u2502   \u251c\u2500\u2500 Package.toml\n\u2502   \u2514\u2500\u2500 ...\nAssets/\nConfig.toml\n")),(0,r.kt)("h2",{id:"paketkonfiguration"},"Paketkonfiguration"),(0,r.kt)("p",null,"Pakete haben eine Konfigurationsdatei im Stammverzeichnis des Paket-Ordners, genannt ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.toml"),". In dieser Datei k\xf6nnen alle relevanten Einstellungen f\xfcr das Paket hinterlegt werden:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:"reference",reference:!0},"https://github.com/nanos-world/nanos-world-server/blob/main/Package.toml\n")),(0,r.kt)("h3",{id:"einstellungen-detailliert"},"Einstellungen detailliert"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Einstellung"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Beschreibung"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"name"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Freundlicher Name des Pakets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"autor"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Author(s) of the Package")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"version"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Version des Pakets - siehe ",(0,r.kt)("a",{parentName:"td",href:"https://semver.org/"},"SemVer"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"bild"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"URL des Bildes im Tresor anzeigen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"type"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Typ des Pakets - siehe ",(0,r.kt)("a",{parentName:"td",href:"#package-types"},"Paketarten"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"force_no_map_script"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enabling this will force the map-script (if any) to do NOT load")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"auto_cleanup"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Aktivieren wird alle Entit\xe4ten dieses Pakets zerst\xf6ren, wenn es entl\xe4dt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"compatibility_version"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"The game version (major.minor) at the time this package was created, for granting the package keeps working between breaking changes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"packages_requirements"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Liste der Pakete, die zuerst geladen werden m\xfcssen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"assets_requirements"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Liste der zu ladenden Asset-Pakete beim Laden dieses Pakets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"compatible_maps"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"List of Maps compatible/recommended to work with this Package")))),(0,r.kt)("h3",{id:"paketarten"},"Paketarten"),(0,r.kt)("p",null,"In nanos world we have 4 kind of packages: ",(0,r.kt)("strong",{parentName:"p"},"script"),", ",(0,r.kt)("strong",{parentName:"p"},"game-mode"),", ",(0,r.kt)("strong",{parentName:"p"},"library")," and ",(0,r.kt)("strong",{parentName:"p"},"loading-screen"),", each one with with a specific functionality and an unique purpose."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Beschreibung"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"script"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Normales Paket, wird seine Skripte ausf\xfchren und beim Start eine neue ",(0,r.kt)("strong",{parentName:"td"},"Lua VM")," erzeugen.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"game-mode"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Like ",(0,r.kt)("inlineCode",{parentName:"td"},"script")," but you can only load one ",(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")," package at once.",(0,r.kt)("br",null),"Useful when you are creating full games which cannot be loaded with other full games packages.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"library"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"It will not load a ",(0,r.kt)("strong",{parentName:"td"},"Lua VM"),". Should be loaded through ",(0,r.kt)("inlineCode",{parentName:"td"},"Package.RequirePackage")," from other Packages.",(0,r.kt)("br",null),"Useful when you are creating a library or framework and want it being loaded on clients as well, or when you need to set this as dependency of other packages.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"loading-screen"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Special Package which will be loaded during player's loading screen.",(0,r.kt)("br",null),"Those packages must have an ",(0,r.kt)("inlineCode",{parentName:"td"},"Index.html")," in the root.",(0,r.kt)("br",null),"Please refer to ",(0,r.kt)("a",{parentName:"td",href:"/de/docs/next/core-concepts/packages/loading-screen"},"Loading Screen")," for more information.")))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you are creating a ",(0,r.kt)("strong",{parentName:"p"},"Tool")," or some ",(0,r.kt)("strong",{parentName:"p"},"Addon")," package, make it ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"script")),"!"),(0,r.kt)("p",{parentName:"admonition"},"If you are creating a ",(0,r.kt)("strong",{parentName:"p"},"Library"),", a ",(0,r.kt)("strong",{parentName:"p"},"Framework")," or some ",(0,r.kt)("strong",{parentName:"p"},"Utility")," package, make it ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"library")),"!"),(0,r.kt)("p",{parentName:"admonition"},"Wenn Sie ein einzigartiges und komplettes <0>Spiel</0> mit mehreren Funktionen erstellen, die nicht durcheinanderbringen gebracht werden sollen, falls jemand zwei volle Spiele l\xe4dt, dann machen Sie es <1>game-mode</1>!")),(0,r.kt)("h3",{id:"compatibility-version"},"Compatibility Version"),(0,r.kt)("p",null,"This setting deserves a special attention. It is meant to assure your packages will not break in future breaking changes updates."),(0,r.kt)("p",null,"It works by forcing that package to run code in a compatibility mode, meaning that breaking changes will keep working as the way it was before. Example:"),(0,r.kt)("p",null,"Let's say you have this code running right now:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'-- Make an asynchronous HTTP request\nHTTP.Request("https://api.nanos.world/", "store/v1/packages/halloween", "GET", "", "application/json", false, {}, function(status, data)\n    -- Do something with my data\nend)\n')),(0,r.kt)("p",null,"And then, in the hypothetical update 9.99 the API changes and make ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestSync")," to become ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.Request")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.Request")," to become ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestAsync"),". I.e. you need to update your code to use ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestAsync")," now, this is a breaking change as the new functions uses the same name as before."),(0,r.kt)("p",null,"With compatibility version, your code can keep working as it was before this update, for that, in your Package.toml you just need to make sure it's ",(0,r.kt)("inlineCode",{parentName:"p"},"compatibility_version")," is set to a version lower than ",(0,r.kt)("inlineCode",{parentName:"p"},"9.99")," (i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"9.98"),")."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The Compatibility Mode is a feature that aims to keep old and unmaintained packages/game-modes to keep working for a longer time. But from time to time (major versions) all the deprecated compatibility modes will be removed from the codebase. So always keep your packages up-to-date!")),(0,r.kt)("h2",{id:"ignoring-client-folders"},"Ignoring Client Folders"),(0,r.kt)("p",null,"Sometimes you want to ignore some folders from being sent to the clients (e.g. auto generated folders from Node.js HTML ones)."),(0,r.kt)("p",null,"So, to make the server ignore it you just need to add an ",(0,r.kt)("inlineCode",{parentName:"p"},".ignore")," file in the root of that folder. Simple as that \ud83d\ude09."))}k.isMDXComponent=!0},55583:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/packages-01-e5ca40b3250f77522f7e280d3a183cf9.jpg"}}]);