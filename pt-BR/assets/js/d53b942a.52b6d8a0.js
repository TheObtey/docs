"use strict";(self.webpackChunkdocs_docusaurus=self.webpackChunkdocs_docusaurus||[]).push([[4606],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>g});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(a),g=r,k=m["".concat(s,".").concat(g)]||m[g]||c[g]||o;return a?n.createElement(k,i(i({ref:t},d),{},{components:a})):n.createElement(k,i({ref:t},d))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},38966:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const o={title:"Guia de pacotes",description:"Tudo o que voc\xea precisa saber sobre os pacotes",sidebar_position:0,tags:["script","packages"],keywords:["packages","script","lua"]},i=void 0,l={unversionedId:"core-concepts/packages/packages-guide",id:"core-concepts/packages/packages-guide",title:"Guia de pacotes",description:"Tudo o que voc\xea precisa saber sobre os pacotes",source:"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/core-concepts/packages/packages-guide.md",sourceDirName:"core-concepts/packages",slug:"/core-concepts/packages/packages-guide",permalink:"/pt-BR/docs/next/core-concepts/packages/packages-guide",draft:!1,editUrl:"https://github.com/nanos-world/docs/edit/master/docs/core-concepts/packages/packages-guide.md",tags:[{label:"script",permalink:"/pt-BR/docs/next/tags/script"},{label:"packages",permalink:"/pt-BR/docs/next/tags/packages"}],version:"current",sidebarPosition:0,frontMatter:{title:"Guia de pacotes",description:"Tudo o que voc\xea precisa saber sobre os pacotes",sidebar_position:0,tags:["script","packages"],keywords:["packages","script","lua"]},sidebar:"main",previous:{title:"Linux & ARM Server installation",permalink:"/pt-BR/docs/next/core-concepts/server-manual/server-linux-arm"},next:{title:"Tela de carregamento",permalink:"/pt-BR/docs/next/core-concepts/packages/loading-screen"}},s={},p=[{value:"Estrutura da pasta",id:"estrutura-da-pasta",level:2},{value:"Configura\xe7\xe3o do pacote",id:"configura\xe7\xe3o-do-pacote",level:2},{value:"Tipos de Pacotes",id:"tipos-de-pacotes",level:2},{value:"<code>script</code>",id:"script",level:3},{value:"<code>modo-jogo</code>",id:"modo-jogo",level:3},{value:"<code>carregando-tela</code>",id:"carregando-tela",level:3},{value:"Configura\xe7\xf5es Detalhadas",id:"configura\xe7\xf5es-detalhadas",level:2},{value:"Compatibility Version",id:"compatibility-version",level:3},{value:"Custom Settings",id:"custom-settings",level:3},{value:"List of Types",id:"list-of-types",level:4},{value:"Ignoring Client Folders",id:"ignoring-client-folders",level:2},{value:"Logo Image",id:"logo-image",level:2}],d={toc:p};function c(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Os pacotes")," s\xe3o peda\xe7os/componentes de seu servidor que executar\xe3o scripts Lua para interagir com o jogo."),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(55583).Z,width:"628",height:"170"})),(0,r.kt)("h2",{id:"estrutura-da-pasta"},"Estrutura da pasta"),(0,r.kt)("p",null,"All Packages must go under ",(0,r.kt)("inlineCode",{parentName:"p"},"Server/Packages/")," folder. Each Package is a folder under that."),(0,r.kt)("p",null,"Eles podem conter as seguintes pastas: ",(0,r.kt)("inlineCode",{parentName:"p"},"Servidor"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Cliente")," e ",(0,r.kt)("inlineCode",{parentName:"p"},"Compartilhados"),". Somente ",(0,r.kt)("strong",{parentName:"p"},"Clientes")," e ",(0,r.kt)("strong",{parentName:"p"},"Compartilhados")," pastas ser\xe3o enviadas e carregadas pelos clientes quando se conectarem."),(0,r.kt)("p",null,"Cada ",(0,r.kt)("strong",{parentName:"p"},"pacote")," deve ter um arquivo chamado ",(0,r.kt)("inlineCode",{parentName:"p"},"Index. ua")," dentro de ",(0,r.kt)("strong",{parentName:"p"},"Servidor"),", ",(0,r.kt)("strong",{parentName:"p"},"Cliente")," ou ",(0,r.kt)("strong",{parentName:"p"},"pastas")," compartilhadas Este \xe9 o \xfanico arquivo que ser\xe1 acionado quando o pacote for carregado, desta forma este arquivo \xe9 respons\xe1vel por incluir outros arquivos e iniciar suas funcionalidades."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="Server Folder"',title:'"Server','Folder"':!0},"NanosWorldServer.exe\nPackages/\n\u251c\u2500\u2500 my-package-01/\n\u2502   \u251c\u2500\u2500 Server/\n\u2502   \u2502   \u251c\u2500\u2500 Index.lua\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u251c\u2500\u2500 Client/\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u251c\u2500\u2500 Shared/\n\u2502   \u2502   \u2514\u2500\u2500 *.lua\n\u2502   \u2514\u2500\u2500 Package.toml\n\u251c\u2500\u2500 my-package-02/\n\u2502   \u251c\u2500\u2500 Package.toml\n\u2502   \u2514\u2500\u2500 ...\nAtivos/\nConfig.toml\n")),(0,r.kt)("h2",{id:"configura\xe7\xe3o-do-pacote"},"Configura\xe7\xe3o do pacote"),(0,r.kt)("p",null,"Packages have a configuration file in the root of the package folder, called ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.toml"),", in this file we can setup all pertinent settings related to the Package. Each ",(0,r.kt)("a",{parentName:"p",href:"#package-types"},"Package Type")," has it's own configuration file format."),(0,r.kt)("p",null,"They all share the same header ",(0,r.kt)("inlineCode",{parentName:"p"},"[meta]"),", which contains the following settings:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:"reference",reference:!0},"https://github.com/nanos-world/nanos-world-server/blob/main/_meta.toml\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Configura\xe7\xe3o"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"title"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Friendly name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"autor"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contributor(s)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"Vers\xe3o"))),(0,r.kt)("td",{parentName:"tr",align:"left"},"Version - in the ",(0,r.kt)("a",{parentName:"td",href:"https://semver.org/"},"SemVer")," format ",(0,r.kt)("inlineCode",{parentName:"td"},"X.Y.Z"))))),(0,r.kt)("h2",{id:"tipos-de-pacotes"},"Tipos de Pacotes"),(0,r.kt)("p",null,"We have 3 types of packages: ",(0,r.kt)("a",{parentName:"p",href:"#script"},"script"),", ",(0,r.kt)("a",{parentName:"p",href:"#game-mode"},"game-mode")," and ",(0,r.kt)("a",{parentName:"p",href:"#loading-screen"},"loading-screen"),", each one with with a specific functionality and an unique purpose:"),(0,r.kt)("h3",{id:"script"},(0,r.kt)("inlineCode",{parentName:"h3"},"script")),(0,r.kt)("p",null,"Script is a normal Package, you can load as many as you want."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="Package.toml" reference',title:'"Package.toml"',reference:!0},"https://github.com/nanos-world/nanos-world-server/blob/main/_script_.toml\n")),(0,r.kt)("h3",{id:"modo-jogo"},(0,r.kt)("inlineCode",{parentName:"h3"},"modo-jogo")),(0,r.kt)("p",null,"GameModes are Like ",(0,r.kt)("inlineCode",{parentName:"p"},"script")," but you can only load one ",(0,r.kt)("inlineCode",{parentName:"p"},"game-mode")," package at once."),(0,r.kt)("p",null,"They are used when you are creating full games which cannot be loaded with other full games packages."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="Package.toml" reference',title:'"Package.toml"',reference:!0},"https://github.com/nanos-world/nanos-world-server/blob/main/_game_mode_.toml\n")),(0,r.kt)("h3",{id:"carregando-tela"},(0,r.kt)("inlineCode",{parentName:"h3"},"carregando-tela")),(0,r.kt)("p",null,"Loading Screen is a special Package which will be loaded during player's loading screen."),(0,r.kt)("p",null,"It must have an ",(0,r.kt)("inlineCode",{parentName:"p"},"index.html")," in the root. Please refer to ",(0,r.kt)("a",{parentName:"p",href:"/pt-BR/docs/next/core-concepts/packages/loading-screen"},"Loading Screen")," for more information."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="Package.toml" reference',title:'"Package.toml"',reference:!0},"https://github.com/nanos-world/nanos-world-server/blob/main/_loading_screen_.toml\n")),(0,r.kt)("h2",{id:"configura\xe7\xf5es-detalhadas"},"Configura\xe7\xf5es Detalhadas"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Configura\xe7\xe3o"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Package\xa0Types"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"force_no_map_package"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"script"),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enabling this will force the map package (if any) to do NOT load")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"limpeza_autom\xe1tica"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"script"),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Ativando isto ir\xe1 destruir todas as entidades criadas por este pacote quando ele descarrega")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"compatibility_version"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"script"),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")),(0,r.kt)("td",{parentName:"tr",align:"left"},"The game version (",(0,r.kt)("inlineCode",{parentName:"td"},"major.minor"),") at the time this package was created, for granting backwards compatibility between breaking changes. See more ",(0,r.kt)("a",{parentName:"td",href:"#compatibility-version"},"here"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"requisitos_pacotes"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"script"),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")),(0,r.kt)("td",{parentName:"tr",align:"left"},"List of Packages dependencies used by this Package which need to be loaded first")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"requisitos_ativos"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"script"),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"game-mode")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Lista de Pacotes de Conte\xfado a serem carregados quando este pacote carrega")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"compatible_maps"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"modo-jogo")),(0,r.kt)("td",{parentName:"tr",align:"left"},"List of Maps compatible/recommended to work with this Game Mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td"},(0,r.kt)("inlineCode",{parentName:"strong"},"custom_settings"))),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"modo-jogo")),(0,r.kt)("td",{parentName:"tr",align:"left"},"List of Custom Settings which can be set when starting a new game or passed through command line to the server. See more ",(0,r.kt)("a",{parentName:"td",href:"#custom-settings"},"here"))))),(0,r.kt)("h3",{id:"compatibility-version"},"Compatibility Version"),(0,r.kt)("p",null,"This setting deserves a special attention. It is meant to assure your packages will not break in future breaking changes updates."),(0,r.kt)("p",null,"It works by forcing that package to run code in a compatibility mode, meaning that breaking changes will keep working as the way it was before. Example:"),(0,r.kt)("p",null,"Let's say you have this code running right now:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'-- Make an asynchronous HTTP request\nHTTP.Request("https://api.nanos.world/", "store/v1/packages/halloween", "GET", "", "application/json", false, {}, function(status, data)\n    -- Do something with my data\nend)\n')),(0,r.kt)("p",null,"And then, in the hypothetical update 9.99 the API changes and make ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestSync")," to become ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.Request")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.Request")," to become ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestAsync"),". I.e. you need to update your code to use ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP.RequestAsync")," now, this is a breaking change as the new functions uses the same name as before."),(0,r.kt)("p",null,"With compatibility version, your code can keep working as it was before this update, for that, in your Package.toml you just need to make sure it's ",(0,r.kt)("inlineCode",{parentName:"p"},"compatibility_version")," is set to a version lower than ",(0,r.kt)("inlineCode",{parentName:"p"},"9.99")," (i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"9.98"),")."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The Compatibility Mode is a feature that aims to keep old and unmaintained packages/game-modes to keep working for a longer time. But from time to time all the deprecated compatibility modes will be removed from the codebase. So always keep your packages up-to-date!")),(0,r.kt)("h3",{id:"custom-settings"},"Custom Settings"),(0,r.kt)("p",null,"GameModes can define Custom Settings in the ",(0,r.kt)("inlineCode",{parentName:"p"},"[custom_settings]")," section to be set when creating a new game through main menu, or set when starting the server with the command ",(0,r.kt)("inlineCode",{parentName:"p"},'--custom_settings "var1 = value1, var2 = value2, ..."')),(0,r.kt)("p",null,"The values defined can be accessed through the method ",(0,r.kt)("a",{parentName:"p",href:"https://docs.nanos.world/docs/next/scripting-reference/static-classes/server#getcustomsettings"},"Server.GetCustomSettings()"),"."),(0,r.kt)("h4",{id:"list-of-types"},"List of Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:"left"},"A toggleable checkbox")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"integer")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Integer numeric values")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"floating")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Floating numeric values")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"text")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Text Box")))),(0,r.kt)("h2",{id:"ignoring-client-folders"},"Ignoring Client Folders"),(0,r.kt)("p",null,"Sometimes you want to ignore some folders from being sent to the clients (e.g. auto generated folders from Node.js HTML ones)."),(0,r.kt)("p",null,"So, to make the server ignore it you just need to add an ",(0,r.kt)("inlineCode",{parentName:"p"},".ignore")," file in the root of that folder. Simple as that \ud83d\ude09."),(0,r.kt)("h2",{id:"logo-image"},"Logo Image"),(0,r.kt)("p",null,"It is possible to have a custom image to be displayed in the Vault. For that, add a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"Package.jpg")," besides the Package.toml with the image you wish. The recommended size is ",(0,r.kt)("inlineCode",{parentName:"p"},"300x150"),"."))}c.isMDXComponent=!0},55583:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/packages-01-e5ca40b3250f77522f7e280d3a183cf9.jpg"}}]);